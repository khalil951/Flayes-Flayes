{% extends 'back.html.twig' %}

{% block title %}Reclamation index{% endblock %}

{% block body %}
   <style>
   .badge-soft-danger {
            color: #f34e4e;
            background-color: rgba(243, 78, 78, 0.1);
        }
        .badge-soft-warning {
    color: #f7cc53;
    background-color: rgba(247,204,83,.1);
}

.badge-soft-success {
    color: #51d28c;
    background-color: rgba(81,210,140,.1);
}

.btn-success-soft {
    color: #28a745;
    background-color: rgba(40, 167, 69, 0.1);
}
.btn-danger-soft {
    color: #dc3545;
    background-color: rgba(220, 53, 69, 0.1);
}

</style>
    <div class="table-wrapper">
        <table class="transaction-table text-left more_space">
            <thead>
                <tr>
                    
                    <th scope="col">object</th>
                    <th scope="col">Description</th>
                    <th scope="col">Type</th>
                    <th scope="col">Etat</th>
                    <th scope="col">Created At</th>
                    <th scope="col">Id User</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for reclamation in reclamations %}
                    <tr>
                        
                        <td>{{ reclamation.object }}</td>
                        <td>{{ reclamation.description }}</td>
                        <td>{{ reclamation.type }}</td>
                        <td>
    {% if reclamation.etat == 'Not Treated' %}
        <span class="badge badge-soft-danger p-2 team-status">{{ reclamation.etat }}</span>
    {% elseif reclamation.etat == 'Treated' %}
        <span class="badge badge-soft-success p-2 team-status">{{ reclamation.etat }}</span>
    {% endif %}
</td>
                        <td>{{ reclamation.date ? reclamation.date|date('Y-m-d H:i:s') : '' }}</td>
                        <td>{{ reclamation.idUser }}</td>
                        {% if reclamation.etat == 'Not Treated' %}
    <td onmouseover="showTextarea(this)" onmouseout="hideTextarea(this)">
    <form action="{{ path('send_email', {'id': reclamation.idRec}) }}" method="post">
        <div id="textareaContainer" style="display: none;">
            <textarea name="response" rows="4" cols="50" placeholder="Write your response here"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Send Response</button>
    </form>
</td>
{% else %}
    <td>
        <form action="{{ path('app_reclamation_delete', {'id': reclamation.idRec}) }}" method="post">
            <button type="submit" class="btn btn-danger">Delete</button>
        </form>
    </td>
{% endif %}
    </tr>
{% endfor %}
            </tbody>
        </table>
    </div>
    <script>
    function showTextarea(element) {
    const textareaContainer = element.querySelector('#textareaContainer');
    if (textareaContainer) {
        textareaContainer.style.display = 'block';
    }
}

function hideTextarea(element) {
    const textareaContainer = element.querySelector('#textareaContainer');
    if (textareaContainer) {
        textareaContainer.style.display = 'none';
    }
}
    </script>


{% endblock %}
